add-key:
  cmd.run:
    - name: apt-key adv --keyserver keyserver.ubuntu.com --recv 7F0CEB10
    - unless: apt-key list | grep -o 7F0CEB10 

/etc/apt/sources.list.d/10gen.list:
  file.managed:
    - source: salt://mongodb/source.jinja2

mongodb:
  pkg.latest:
    - name: mongodb-10gen
    - require:
      - cmd: add-key
      - file: /etc/apt/sources.list.d/10gen.list
  service:
    - running
    - enable: True
    - require:
      - pkg: mongodb
